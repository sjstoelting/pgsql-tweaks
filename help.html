<div class="markdown-heading"><h1 class="heading-element">
<a href="https://www.postgresql.org" rel="nofollow">PostgreSQL</a> Views and Functions</h1><a id="user-content-postgresql-views-and-functions" class="anchor" aria-label="Permalink: PostgreSQL Views and Functions" href="#postgresql-views-and-functions"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>The functions and views published in this repository are some of those, which I
regularly need in my daily job.</p>
<p>As these procedures are sort of essential, at least to me, I install them in the
public schema. That way they are available for everyone without having to know
a schema name.</p>
<p>All functions and views are covered by tests. The tests are done in simple SQL
statements. Each test does raise division by zero if it fails.</p>
<p>The tests have been done with PostgreSQL 13 up to 18 beta 1.</p>
<p>All examples have been tested with PostgreSQL 17, differences in the behavior of previous versions are noted.</p>
<p><a href=""><img src="https://camo.githubusercontent.com/d2a89cd3f2051b2365b8b045ef9d3654181181b3abe1492d0399909e1509d747/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f506f737467726553514c2d31332d626c75652e737667" alt="version" data-canonical-src="https://img.shields.io/badge/PostgreSQL-13-blue.svg" style="max-width: 100%;"></a>
<a href=""><img src="https://camo.githubusercontent.com/b2dd345d55c35062416aff03b72efd385599e03675909bdefb362d27c0d6e6bd/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f506f737467726553514c2d31342d626c75652e737667" alt="version" data-canonical-src="https://img.shields.io/badge/PostgreSQL-14-blue.svg" style="max-width: 100%;"></a>
<a href=""><img src="https://camo.githubusercontent.com/2afe3e6dfa0535af3158334804ad3e1e6b09cfda81d51435d3f812fb05c62df1/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f506f737467726553514c2d31352d626c75652e737667" alt="version" data-canonical-src="https://img.shields.io/badge/PostgreSQL-15-blue.svg" style="max-width: 100%;"></a>
<a href=""><img src="https://camo.githubusercontent.com/b6c9ddd95255ec3cbdf81d2069c3809387320b4f1489052dd8fba4544591ba33/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f506f737467726553514c2d31362d626c75652e737667" alt="version" data-canonical-src="https://img.shields.io/badge/PostgreSQL-16-blue.svg" style="max-width: 100%;"></a>
<a href=""><img src="https://camo.githubusercontent.com/d4308dc0c9177c0ebe49205431eebc432e19f044dff1d87bc077e188fbdc9359/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f506f737467726553514c2d31372d626c75652e737667" alt="version" data-canonical-src="https://img.shields.io/badge/PostgreSQL-17-blue.svg" style="max-width: 100%;"></a>
<a href=""><img src="https://camo.githubusercontent.com/feeedaaefc21a2cc6580081cda31c350d913637ebf0b5f5b40a910c098965ef7/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f506f737467726553514c2d313862657461312d626c75652e737667" alt="version" data-canonical-src="https://img.shields.io/badge/PostgreSQL-18beta1-blue.svg" style="max-width: 100%;"></a></p>
<p><a href=""><img src="https://camo.githubusercontent.com/e0d0f6996fdf3cba78960efb62417ee001bcefd28e8b4eeef2f3b4d31dfc7700/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c616e67756167652d706c2f706753514c2d677265656e2e737667" alt="Lang" data-canonical-src="https://img.shields.io/badge/Language-pl/pgSQL-green.svg" style="max-width: 100%;"></a>
<a href=""><img src="https://camo.githubusercontent.com/5eb31bac795fead9fbd57443292b5dfaeaaa49f08fd856d0254192c8803a279e/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e73652d506f737467726553514c2d677265656e2e737667" alt="PostgreSQL" data-canonical-src="https://img.shields.io/badge/License-PostgreSQL-green.svg" style="max-width: 100%;"></a>
<a href=""><img src="https://camo.githubusercontent.com/b09338ed28c485df31576dbdcd7c6da762ea2ee056e78f07f34642933e3a4198/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f457874656e73696f6e2d506f737467726553514c2d677265656e2e737667" alt="Extension" data-canonical-src="https://img.shields.io/badge/Extension-PostgreSQL-green.svg" style="max-width: 100%;"></a></p>
<div class="markdown-heading"><h1 class="heading-element">Repositories</h1><a id="user-content-repositories" class="anchor" aria-label="Permalink: Repositories" href="#repositories"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>The main repository is now on
<a href="https://gitlab.com/sjstoelting/pgsql-tweaks.git" rel="nofollow">GitLab</a>. A mirror will stay on <a href="https://github.com/sjstoelting/pgsql-tweaks">GitHub</a>.</p>
<p>If you discover any issue, please file them on
<a href="https://gitlab.com/sjstoelting/pgsql-tweaks/-/issues" rel="nofollow">https://gitlab.com/sjstoelting/pgsql-tweaks/-/issues</a>.</p>
<div class="markdown-heading"><h1 class="heading-element">Building the extension</h1><a id="user-content-building-the-extension" class="anchor" aria-label="Permalink: Building the extension" href="#building-the-extension"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>Each function and test is organized into its own separate file for easy management. The shell script <code>create_sql.sh</code> is responsible for assembling these files into the appropriate SQL scripts needed for extension creation.</p>
<div class="markdown-heading"><h2 class="heading-element">Configuration</h2><a id="user-content-configuration" class="anchor" aria-label="Permalink: Configuration" href="#configuration"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>Copy the example configuration file <code>build.cfg.example</code> to <code>build.cfg</code>.
Modify <code>build.cfg</code> to include the database connection information of your environment.</p>
<div class="markdown-heading"><h2 class="heading-element">Running the Script</h2><a id="user-content-running-the-script" class="anchor" aria-label="Permalink: Running the Script" href="#running-the-script"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>The script automatically generates the necessary SQL scripts by combining the function and test files.
It is assumed that you have a <a href="https://www.postgresql.org/docs/current/static/libpq-pgpass.html" rel="nofollow"><code>.pgpass</code></a> file in your home directory, containing the database credentials matching the configuration. This file simplifies the login process during script execution.
Otherwise you have to login with credentials for each execution.</p>
<p>The test results are generated with messages and captions in your local language settings. In addition the <code>test/sql/out/pgsql-tweaks-test-[version number].out</code> file has timing on, you see the execution time for each test.</p>
<div class="markdown-heading"><h2 class="heading-element">Releasing</h2><a id="user-content-releasing" class="anchor" aria-label="Permalink: Releasing" href="#releasing"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>The script accepts an optional argument to control whether a zip file for <a href="https://pgxn.org/" rel="nofollow">PGXN</a> (PostgreSQL Extension Network) is created. PGXN is also the prefered installation method.</p>
<p>You have to pass <code>'y'</code> as the first argument to the script. The language of the test results will be in English UTF8 en_EN.
In addition a zip archive is generated ready for submission to PGXN.</p>
<p>The <code>test/sql/out/pgsql-tweaks-test-[version number].out</code> file is generated without timing, otherwise the test results would not be comparable.</p>
<p>Example:</p>
<div class="highlight highlight-source-shell"><pre>./create_sql.sh y</pre></div>
<p>This will create a zip file of the extension in the <code>$HOME/tmp</code> directory with the pattern <code>pgsql-tweaks-[version number].zip</code>.
When the directory <code>$HOME/tmp</code> does not exist, it is created by the scirpt.
If no argument is provided, or if the argument is not <code>'y'</code>, the PGXN zip file is <strong>not</strong> created.</p>
<div class="markdown-heading"><h1 class="heading-element">Installation</h1><a id="user-content-installation" class="anchor" aria-label="Permalink: Installation" href="#installation"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>You may either, install all functions as a package, or install single functions of your choice.</p>
<div class="markdown-heading"><h2 class="heading-element">Install the package from source</h2><a id="user-content-install-the-package-from-source" class="anchor" aria-label="Permalink: Install the package from source" href="#install-the-package-from-source"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>Get the source by either, download the code as ZIP file, or by git clone.</p>
<div class="highlight highlight-source-shell"><pre><span class="pl-c1">cd</span> pgsql_tweaks
make install</pre></div>
<p>Afterwards you are able to create the extension in a database:</p>
<div class="highlight highlight-source-sql"><pre>CREATE EXTENSION pgsql_tweaks;</pre></div>
<div class="markdown-heading"><h2 class="heading-element">Install the package with PGXN</h2><a id="user-content-install-the-package-with-pgxn" class="anchor" aria-label="Permalink: Install the package with PGXN" href="#install-the-package-with-pgxn"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>pgsql_tweaks is now available over the PostgreSQL extension management, <a href="https://pgxn.org/dist/pgsql_tweaks/" rel="nofollow">PGXN</a>.</p>
<p>The installation is done with the PGXN installer and it is the prefered installation.</p>
<div class="highlight highlight-source-shell"><pre>pgxn install pgsql_tweaks</pre></div>
<p>Afterwards you are able to create the extension in a database:</p>
<div class="highlight highlight-source-sql"><pre>CREATE EXTENSION pgsql_tweaks;</pre></div>
<div class="markdown-heading"><h2 class="heading-element">Testing</h2><a id="user-content-testing" class="anchor" aria-label="Permalink: Testing" href="#testing"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>When your local language is not set LC_MESSAGES to en_EN, you have to execute the the test in the installation directory with an additional parameter to have comparable results.</p>
<div class="highlight highlight-source-shell"><pre>LC_MESSAGES=en_EN psql -f test/sql/out/pgsql-tweaks-[version number].sql <span class="pl-k">&gt;</span> pgsql-tweaks-test-[version number].out
diff pgsql-tweaks-[version number].out test/sql/out/pgsql-tweaks-test-[version number].out</pre></div>
<div class="markdown-heading"><h1 class="heading-element">Table of content</h1><a id="user-content-table-of-content" class="anchor" aria-label="Permalink: Table of content" href="#table-of-content"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>1 <a href="#user-content-list-of-functions">List of functions</a></p>
<p>1.1 <a href="#user-content-functions-to-check-data-types">Functions to check data types</a><br>
1.1.1 <a href="#user-content-function-is_date">FUNCTION is_date</a><br>
1.1.2 <a href="#user-content-function-is_time">FUNCTION is_time</a><br>
1.1.3 <a href="#user-content-function-is_timestamp">FUNCTION is_timestamp</a><br>
1.1.4 <a href="#user-content-function-is_real">FUNCTION is_real</a><br>
1.1.5 <a href="#user-content-function-is_double_precision">FUNCTION is_double_precision</a><br>
1.1.6 <a href="#user-content-function-is_numeric">FUNCTION is_numeric</a><br>
1.1.7 <a href="#user-content-function-is_bigint">FUNCTION is_bigint</a><br>
1.1.8 <a href="#user-content-function-is_integer">FUNCTION is_integer</a><br>
1.1.9 <a href="#user-content-function-is_smallint">FUNCTION is_smallint</a><br>
1.1.10 <a href="#user-content-function-is_boolean">FUNCTION is_boolean</a><br>
1.1.11 <a href="#user-content-function-is_json">FUNCTION is_json</a><br>
1.1.12 <a href="#user-content-function-is_jsonb">FUNCTION is_jsonb</a><br>
1.1.13 <a href="#user-content-function-is_empty-or-is_empty_b">FUNCTION is_empty or is_empty_b</a><br>
1.1.14 <a href="#user-content-function-is_hex">FUNCTION is_hex</a></p>
<p>1.2 <a href="#user-content-functions-about-encryption">Functions about encryption</a><br>
1.2.1 <a href="#user-content-function-sha256">FUNCTION sha256</a></p>
<p>1.3 <a href="#user-content-functions-and-views-to-get-extended-system-information">Functions and views to get extended system information</a><br>
1.3.1 <a href="#user-content-function-pg_schema_size">FUNCTION pg_schema_size</a><br>
1.3.2 <a href="#user-content-view-pg_db_views">VIEW pg_db_views</a><br>
1.3.3 <a href="#user-content-view-pg_foreign_keys">VIEW pg_foreign_keys</a><br>
1.3.4 <a href="#user-content-view-pg_functions">VIEW pg_functions</a><br>
1.3.4 <a href="#user-content-view-pg_active_locks">VIEW pg_active_locks</a><br>
1.3.5 <a href="#user-content-view-pg_table_matview_infos">VIEW pg_table_matview_infos</a><br>
1.3.6 <a href="#user-content-view-pg_object_ownership">VIEW pg_object_ownership</a><br>
1.3.7 <a href="#user-content-view-pg_partitioned_tables_infos">VIEW pg_partitioned_tables_infos</a></p>
<p>1.4 <a href="#user-content-functions-about-encodings">Functions about encodings</a><br>
1.4.1 <a href="#user-content-function-is_encoding">FUNCTION is_encoding</a><br>
1.4.2 <a href="#user-content-function-is_latin1">FUNCTION is_latin1</a><br>
1.4.3 <a href="#user-content-function-return_not_part_of_latin1">FUNCTION return_not_part_of_latin1</a><br>
1.4.4 <a href="#user-content-function-replace_latin1">FUNCTION replace_latin1</a><br>
1.4.4.1 <a href="#user-content-replace_latin1-s-text-">replace_latin1(s text)</a><br>
1.4.4.2 <a href="#user-content-replace_latin1-s-text-replacement-text-">replace_latin1(s text, replacement text)</a><br>
1.4.4.3 <a href="#user-content-replace_latin1-s-text-s_search-text-s_replace-text-">replace_latin1(s text, s_search text[], s_replace text[])</a><br>
1.4.5 <a href="#user-content-function-return_not_part_of_encoding">FUNCTION return_not_part_of_encoding</a><br>
1.4.6 <a href="#user-content-function-replace_encoding">FUNCTION replace_encoding</a><br>
1.4.6.1 <a href="#user-content-replace_encoding-s-text-e-text-">replace_encoding(s text, e text)</a><br>
1.4.6.2 <a href="#user-content-replace_encoding-s-text-e-text-replacement-text-">replace_encoding(s text, e text, replacement text)</a><br>
1.4.6.3 <a href="#user-content-replace_encoding-s-text-s_search-text-s_replace-text-">replace_encoding(s text, s_search text[], s_replace text[])</a></p>
<p>1.5 <a href="#user-content-user-defined-aggregates">User defined aggregates</a><br>
1.5.1 <a href="#user-content-aggregate-gap_fill">AGGREGATE gap_fill</a><br>
1.5.2 <a href="#user-content-aggregate-array_min">AGGREGATE array_min</a><br>
1.5.3 <a href="#user-content-aggregate-array_max">AGGREGATE array_max</a><br>
1.5.4 <a href="#user-content-aggregate-array_avg">AGGREGATE array_avg</a><br>
1.5.5 <a href="#user-content-aggregate-array_sum">AGGREGATE array_sum</a></p>
<p>1.6 <a href="#user-content-format-functions">Format functions</a><br>
1.6.1 <a href="#user-content-function-date_de">FUNCTION date_de</a><br>
1.6.2 <a href="#user-content-function-datetime_de">FUNCTION datetime_de</a></p>
<p>1.7 <a href="#user-content-conversion-functions">Conversion functions</a><br>
1.7.1 <a href="#user-content-function-to_unix_timestamp">FUNCTION to_unix_timestamp</a><br>
1.7.2 <a href="#user-content-function-hex2bigint">FUNCTION hex2bigint</a></p>
<p>1.8 <a href="#user-content-other-functions">Other functions</a><br>
1.8.1 <a href="#user-content-function-array_trim">FUNCTION array_trim</a><br>
1.8.2 <a href="#user-content-function-get_markdown_doku_by_schema">FUNCTION get_markdown_doku_by_schema</a></p>
<div class="markdown-heading"><h1 class="heading-element">List of functions</h1><a id="user-content-list-of-functions" class="anchor" aria-label="Permalink: List of functions" href="#list-of-functions"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="markdown-heading"><h2 class="heading-element">Functions to check data types</h2><a id="user-content-functions-to-check-data-types" class="anchor" aria-label="Permalink: Functions to check data types" href="#functions-to-check-data-types"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="markdown-heading"><h3 class="heading-element">FUNCTION is_date</h3><a id="user-content-function-is_date" class="anchor" aria-label="Permalink: FUNCTION is_date" href="#function-is_date"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>The function checks strings for being a date.<br>
You might pass a second parameter to use a format string. Without the format,
the default format of PostgreSQL is used.</p>
<p>There has been a behaviour change in PostgreSQL 10. A conversion is now handled
strict, as in previous versions the conversion tried to calculate dates.</p>
<div class="markdown-heading"><h4 class="heading-element">Example PostgreSQL &lt; 10</h4><a id="user-content-example-postgresql--10" class="anchor" aria-label="Permalink: Example PostgreSQL &lt; 10" href="#example-postgresql--10"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> is_date(<span class="pl-s"><span class="pl-pds">'</span>31.02.2018<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>DD.MM.YYYY<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;
<span class="pl-c"><span class="pl-c">--</span> Result is true because the conversion would return a valid result for</span>
<span class="pl-k">SELECT</span> to_date(<span class="pl-s"><span class="pl-pds">'</span>31.02.2018<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>DD.MM.YYYY<span class="pl-pds">'</span></span>);</pre></div>
<p>Result PostgreSQL 9.6 and previous versions:</p>
<table>
<thead>
<tr>
<th>to_date</th>
</tr>
</thead>
<tbody>
<tr>
<td>2018-03-03</td>
</tr>
</tbody>
</table>
<div class="markdown-heading"><h4 class="heading-element">Examples</h4><a id="user-content-examples" class="anchor" aria-label="Permalink: Examples" href="#examples"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="highlight highlight-source-sql"><pre><span class="pl-c"><span class="pl-c">/*</span>*</span>
<span class="pl-c"> * Parameter is in PostgreSQL default format</span>
<span class="pl-c"> <span class="pl-c">*/</span></span>
<span class="pl-k">SELECT</span> is_date(<span class="pl-s"><span class="pl-pds">'</span>2018-01-01<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="center">res</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">t</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> is_date(<span class="pl-s"><span class="pl-pds">'</span>2018-02-31<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="center">res</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">f</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-c"><span class="pl-c">/*</span>*</span>
<span class="pl-c"> * Parameter is in PostgreSQL German format</span>
<span class="pl-c"> <span class="pl-c">*/</span></span>
<span class="pl-k">SELECT</span> is_date(<span class="pl-s"><span class="pl-pds">'</span>01.01.2018<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>DD.MM.YYYY<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="center">res</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">t</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> is_date(<span class="pl-s"><span class="pl-pds">'</span>31.02.2018<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>DD.MM.YYYY<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="center">res</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">f</td>
</tr>
</tbody>
</table>
<div class="markdown-heading"><h3 class="heading-element">FUNCTION is_time</h3><a id="user-content-function-is_time" class="anchor" aria-label="Permalink: FUNCTION is_time" href="#function-is_time"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>The function checks strings for being a time.<br>
You might pass a second parameter to use a format string. Without the format,
the default format of PostgreSQL is used.</p>
<p>There has been a behaviour change in PostgreSQL 10. A conversion is now handled
strict, as in previous versions the conversion tried to calculate time.</p>
<div class="markdown-heading"><h4 class="heading-element">Example PostgreSQL &lt; 10</h4><a id="user-content-example-postgresql--10-1" class="anchor" aria-label="Permalink: Example PostgreSQL &lt; 10" href="#example-postgresql--10-1"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> is_time(<span class="pl-s"><span class="pl-pds">'</span>25.33.55,456574<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>HH24.MI.SS,US<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;
<span class="pl-c"><span class="pl-c">--</span> Result is true because the conversion would return a valid result for</span>
<span class="pl-k">SELECT</span> to_timestamp(<span class="pl-s"><span class="pl-pds">'</span>25.33.55,456574<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>HH24.MI.SS,US<span class="pl-pds">'</span></span>)::<span class="pl-k">TIME</span>;</pre></div>
<p>Result PostgreSQL 9.6 and previous versions:</p>
<table>
<thead>
<tr>
<th>to_timestamp</th>
</tr>
</thead>
<tbody>
<tr>
<td>01:33:55.456574</td>
</tr>
</tbody>
</table>
<div class="markdown-heading"><h4 class="heading-element">Examples</h4><a id="user-content-examples-1" class="anchor" aria-label="Permalink: Examples" href="#examples-1"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="highlight highlight-source-sql"><pre><span class="pl-c"><span class="pl-c">/*</span>*</span>
<span class="pl-c"> * Parameter is in PostgreSQL default format</span>
<span class="pl-c"> <span class="pl-c">*/</span></span>
<span class="pl-k">SELECT</span> is_time(<span class="pl-s"><span class="pl-pds">'</span>14:33:55.456574<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="center">res</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">t</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> is_time(<span class="pl-s"><span class="pl-pds">'</span>25:33:55.456574<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="center">res</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">f</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-c"><span class="pl-c">/*</span>*</span>
<span class="pl-c"> * Parameter is some time format</span>
<span class="pl-c"> <span class="pl-c">*/</span></span>
<span class="pl-k">SELECT</span> is_time(<span class="pl-s"><span class="pl-pds">'</span>14.33.55,456574<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>HH24.MI.SS,US<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="center">res</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">t</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> is_time(<span class="pl-s"><span class="pl-pds">'</span>25.33.55,456574<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>HH24.MI.SS,US<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="center">res</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">f</td>
</tr>
</tbody>
</table>
<div class="markdown-heading"><h3 class="heading-element">FUNCTION is_timestamp</h3><a id="user-content-function-is_timestamp" class="anchor" aria-label="Permalink: FUNCTION is_timestamp" href="#function-is_timestamp"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>The function checks strings for being a timestamp.<br>
You might pass a second parameter to use a format string. Without the format,
the default format of PostgreSQL is used.</p>
<p>There has been a behaviour change in PostgreSQL 10. A conversion is now handled
strict, as in previous versions the conversion tried to calculate a date.</p>
<div class="markdown-heading"><h4 class="heading-element">Example PostgreSQL &lt; 10</h4><a id="user-content-example-postgresql--10-2" class="anchor" aria-label="Permalink: Example PostgreSQL &lt; 10" href="#example-postgresql--10-2"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> is_timestamp(<span class="pl-s"><span class="pl-pds">'</span>2018-01-01 25:00:00<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;
<span class="pl-c"><span class="pl-c">--</span> Result is true because the conversion would return a valid result for</span>
<span class="pl-k">SELECT</span> to_timestamp(<span class="pl-s"><span class="pl-pds">'</span>01.01.2018 25:00:00<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>DD.MM.YYYY HH24.MI.SS<span class="pl-pds">'</span></span>)::<span class="pl-k">TIMESTAMP</span>;</pre></div>
<p>Result PostgreSQL 9.6 and previous versions:</p>
<table>
<thead>
<tr>
<th>to_timestamp</th>
</tr>
</thead>
<tbody>
<tr>
<td>2018-01-02 01:00:00</td>
</tr>
</tbody>
</table>
<div class="markdown-heading"><h4 class="heading-element">Examples</h4><a id="user-content-examples-2" class="anchor" aria-label="Permalink: Examples" href="#examples-2"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="highlight highlight-source-sql"><pre><span class="pl-c"><span class="pl-c">/*</span>*</span>
<span class="pl-c"> * Parameter is in PostgreSQL default format</span>
<span class="pl-c"> <span class="pl-c">*/</span></span>
<span class="pl-k">SELECT</span> is_timestamp(<span class="pl-s"><span class="pl-pds">'</span>2018-01-01 00:00:00<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="center">res</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">t</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> is_timestamp(<span class="pl-s"><span class="pl-pds">'</span>2018-01-01 25:00:00<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;
<span class="pl-c"><span class="pl-c">--</span> Result is false in PostgreSQL &gt;= 10</span></pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="center">res</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">f</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-c"><span class="pl-c">/*</span>*</span>
<span class="pl-c"> * Parameter is in PostgreSQL German format</span>
<span class="pl-c"> <span class="pl-c">*/</span></span>
<span class="pl-k">SELECT</span> is_timestamp(<span class="pl-s"><span class="pl-pds">'</span>01.01.2018 00:00:00<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>DD.MM.YYYY HH24.MI.SS<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="center">res</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">t</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> is_timestamp(<span class="pl-s"><span class="pl-pds">'</span>01.01.2018 25:00:00<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>DD.MM.YYYY HH24.MI.SS<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="center">res</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">f</td>
</tr>
</tbody>
</table>
<div class="markdown-heading"><h3 class="heading-element">FUNCTION is_real</h3><a id="user-content-function-is_real" class="anchor" aria-label="Permalink: FUNCTION is_real" href="#function-is_real"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>The function checks strings for being of data type REAL.</p>
<div class="markdown-heading"><h4 class="heading-element">Examples</h4><a id="user-content-examples-3" class="anchor" aria-label="Permalink: Examples" href="#examples-3"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> is_real(<span class="pl-s"><span class="pl-pds">'</span>123.456<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="center">res</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">t</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> is_real(<span class="pl-s"><span class="pl-pds">'</span>123,456<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;
<span class="pl-c"><span class="pl-c">--</span> Result is false</span></pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="center">res</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">f</td>
</tr>
</tbody>
</table>
<div class="markdown-heading"><h3 class="heading-element">FUNCTION is_double_precision</h3><a id="user-content-function-is_double_precision" class="anchor" aria-label="Permalink: FUNCTION is_double_precision" href="#function-is_double_precision"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>The function checks strings for being of data type DOUBLE PRECISION.</p>
<div class="markdown-heading"><h4 class="heading-element">Examples</h4><a id="user-content-examples-4" class="anchor" aria-label="Permalink: Examples" href="#examples-4"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> is_double_precision(<span class="pl-s"><span class="pl-pds">'</span>123.456<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="center">res</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">t</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> is_double_precision(<span class="pl-s"><span class="pl-pds">'</span>123,456<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;
<span class="pl-c"><span class="pl-c">--</span> Result is false</span></pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="center">res</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">f</td>
</tr>
</tbody>
</table>
<div class="markdown-heading"><h3 class="heading-element">FUNCTION is_numeric</h3><a id="user-content-function-is_numeric" class="anchor" aria-label="Permalink: FUNCTION is_numeric" href="#function-is_numeric"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>The function checks strings for being of data type NUMERIC.</p>
<div class="markdown-heading"><h4 class="heading-element">Examples</h4><a id="user-content-examples-5" class="anchor" aria-label="Permalink: Examples" href="#examples-5"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> is_numeric(<span class="pl-s"><span class="pl-pds">'</span>123<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="center">res</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">t</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> is_numeric(<span class="pl-s"><span class="pl-pds">'</span>1 2<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;
<span class="pl-c"><span class="pl-c">--</span> Result is false</span></pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="center">res</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">f</td>
</tr>
</tbody>
</table>
<div class="markdown-heading"><h3 class="heading-element">FUNCTION is_bigint</h3><a id="user-content-function-is_bigint" class="anchor" aria-label="Permalink: FUNCTION is_bigint" href="#function-is_bigint"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>The function checks strings for being of data type BIGINT.</p>
<div class="markdown-heading"><h4 class="heading-element">Examples</h4><a id="user-content-examples-6" class="anchor" aria-label="Permalink: Examples" href="#examples-6"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> is_bigint(<span class="pl-s"><span class="pl-pds">'</span>3243546343<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;
<span class="pl-c"><span class="pl-c">--</span> Result is true</span></pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="center">res</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">t</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> is_bigint(<span class="pl-s"><span class="pl-pds">'</span>123.456<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;
<span class="pl-c"><span class="pl-c">--</span> Result is false</span></pre></div>
<div class="markdown-heading"><h3 class="heading-element">FUNCTION is_integer</h3><a id="user-content-function-is_integer" class="anchor" aria-label="Permalink: FUNCTION is_integer" href="#function-is_integer"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>The function checks strings for being of data type INTEGER.</p>
<div class="markdown-heading"><h4 class="heading-element">Examples</h4><a id="user-content-examples-7" class="anchor" aria-label="Permalink: Examples" href="#examples-7"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> is_integer(<span class="pl-s"><span class="pl-pds">'</span>123<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;
<span class="pl-c"><span class="pl-c">--</span> Result is true</span></pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="center">res</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">t</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> is_integer(<span class="pl-s"><span class="pl-pds">'</span>123.456<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;
<span class="pl-c"><span class="pl-c">--</span> Result is false</span></pre></div>
<div class="markdown-heading"><h3 class="heading-element">FUNCTION is_smallint</h3><a id="user-content-function-is_smallint" class="anchor" aria-label="Permalink: FUNCTION is_smallint" href="#function-is_smallint"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>The function checks strings for being of data type SMALLINT.</p>
<div class="markdown-heading"><h4 class="heading-element">Examples</h4><a id="user-content-examples-8" class="anchor" aria-label="Permalink: Examples" href="#examples-8"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> is_smallint(<span class="pl-s"><span class="pl-pds">'</span>123<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;
<span class="pl-c"><span class="pl-c">--</span> Result is true</span></pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="center">res</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">t</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> is_smallint(<span class="pl-s"><span class="pl-pds">'</span>123.456<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;
<span class="pl-c"><span class="pl-c">--</span> Result is false</span></pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="center">res</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">f</td>
</tr>
</tbody>
</table>
<div class="markdown-heading"><h3 class="heading-element">FUNCTION is_boolean</h3><a id="user-content-function-is_boolean" class="anchor" aria-label="Permalink: FUNCTION is_boolean" href="#function-is_boolean"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>The function checks a string variable for containing valid BOOLEAN values.</p>
<table>
<thead>
<tr>
<th>boolean strings</th>
</tr>
</thead>
<tbody>
<tr>
<td>t</td>
</tr>
<tr>
<td>f</td>
</tr>
<tr>
<td>T</td>
</tr>
<tr>
<td>F</td>
</tr>
<tr>
<td>y</td>
</tr>
<tr>
<td>n</td>
</tr>
<tr>
<td>Y</td>
</tr>
<tr>
<td>N</td>
</tr>
<tr>
<td>true</td>
</tr>
<tr>
<td>false</td>
</tr>
<tr>
<td>TRUE</td>
</tr>
<tr>
<td>FALSE</td>
</tr>
<tr>
<td>yes</td>
</tr>
<tr>
<td>no</td>
</tr>
<tr>
<td>YES</td>
</tr>
<tr>
<td>NO</td>
</tr>
<tr>
<td>0</td>
</tr>
<tr>
<td>1</td>
</tr>
</tbody>
</table>
<div class="markdown-heading"><h4 class="heading-element">Examples</h4><a id="user-content-examples-9" class="anchor" aria-label="Permalink: Examples" href="#examples-9"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> is_boolean(<span class="pl-s"><span class="pl-pds">'</span>t<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;
<span class="pl-c"><span class="pl-c">--</span> Result is true</span></pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="center">res</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">t</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> is_boolean(<span class="pl-s"><span class="pl-pds">'</span>F<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;
<span class="pl-c"><span class="pl-c">--</span> Result is true</span></pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="center">res</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">t</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> is_boolean(<span class="pl-s"><span class="pl-pds">'</span>True<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;
<span class="pl-c"><span class="pl-c">--</span> Result is true</span></pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="center">res</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">t</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> is_boolean(<span class="pl-s"><span class="pl-pds">'</span>False<span class="pl-pds">'</span></span>);
<span class="pl-c"><span class="pl-c">--</span> Result is true</span></pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="center">res</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">t</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> is_boolean(<span class="pl-s"><span class="pl-pds">'</span>0<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;
<span class="pl-c"><span class="pl-c">--</span> Result is true</span></pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="center">res</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">t</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> is_boolean(<span class="pl-s"><span class="pl-pds">'</span>1<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;
<span class="pl-c"><span class="pl-c">--</span> Result is true</span></pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="center">res</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">t</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> is_boolean(<span class="pl-s"><span class="pl-pds">'</span>-1<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;
<span class="pl-c"><span class="pl-c">--</span> Result is false</span></pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="center">res</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">f</td>
</tr>
</tbody>
</table>
<div class="markdown-heading"><h3 class="heading-element">FUNCTION is_json</h3><a id="user-content-function-is_json" class="anchor" aria-label="Permalink: FUNCTION is_json" href="#function-is_json"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>The function checks a string variable for containing a valid JSON.</p>
<div class="markdown-heading"><h4 class="heading-element">Examples</h4><a id="user-content-examples-10" class="anchor" aria-label="Permalink: Examples" href="#examples-10"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> is_json(<span class="pl-s"><span class="pl-pds">'</span>{"review": {"date": "1970-12-30", "votes": 10, "rating": 5, "helpful_votes": 0}, "product": {"id": "1551803542", "group": "Book", "title": "Start and Run a Coffee Bar (Start &amp; Run a)", "category": "Business &amp; Investing", "sales_rank": 11611, "similar_ids": ["0471136174", "0910627312", "047112138X", "0786883561", "0201570483"], "subcategory": "General"}, "customer_id": "AE22YDHSBFYIP"}<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="center">res</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">t</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> is_json(<span class="pl-s"><span class="pl-pds">'</span>Not a JSON<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="center">res</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">f</td>
</tr>
</tbody>
</table>
<div class="markdown-heading"><h3 class="heading-element">FUNCTION is_jsonb</h3><a id="user-content-function-is_jsonb" class="anchor" aria-label="Permalink: FUNCTION is_jsonb" href="#function-is_jsonb"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>The function checks a string variable for containing a valid JSONB.</p>
<div class="markdown-heading"><h4 class="heading-element">Example</h4><a id="user-content-example" class="anchor" aria-label="Permalink: Example" href="#example"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> is_jsonb(<span class="pl-s"><span class="pl-pds">'</span>{"review": {"date": "1970-12-30", "votes": 10, "rating": 5, "helpful_votes": 0}, "product": {"id": "1551803542", "group": "Book", "title": "Start and Run a Coffee Bar (Start &amp; Run a)", "category": "Business &amp; Investing", "sales_rank": 11611, "similar_ids": ["0471136174", "0910627312", "047112138X", "0786883561", "0201570483"], "subcategory": "General"}, "customer_id": "AE22YDHSBFYIP"}<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="center">res</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">t</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> is_jsonb(<span class="pl-s"><span class="pl-pds">'</span>Not a JSONB<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="center">res</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">f</td>
</tr>
</tbody>
</table>
<div class="markdown-heading"><h3 class="heading-element">FUNCTION is_empty or is_empty_b</h3><a id="user-content-function-is_empty-or-is_empty_b" class="anchor" aria-label="Permalink: FUNCTION is_empty or is_empty_b" href="#function-is_empty-or-is_empty_b"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>The function checks a string variable for being either, NULL or '' and is returing a boolean result.</p>
<p>The extension <a href="https://pgtap.org/" rel="nofollow">pgtap</a> has the same name for a function with the same purpose, but a different returning value.<br>
Therefore the function name differs, if pgtap is installed.</p>
<p>The function <strong>is_empty</strong>, when pgtap is not installed.</p>
<p>The function <strong>is_empty_b</strong>, when pgtap is not installed. The <strong>b</strong> stands for its boolean result.</p>
<div class="markdown-heading"><h4 class="heading-element">Examples</h4><a id="user-content-examples-11" class="anchor" aria-label="Permalink: Examples" href="#examples-11"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> is_empty(<span class="pl-s"><span class="pl-pds">'</span>abc<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;
<span class="pl-c"><span class="pl-c">--</span> Result is false</span></pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="center">res</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">f</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> is_empty(<span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;
<span class="pl-c"><span class="pl-c">--</span> Result is true</span></pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="center">res</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">t</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> is_empty(<span class="pl-k">NULL</span>) <span class="pl-k">AS</span> res;
<span class="pl-c"><span class="pl-c">--</span> Result is true</span></pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="center">res</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">t</td>
</tr>
</tbody>
</table>
<div class="markdown-heading"><h3 class="heading-element">FUNCTION is_hex</h3><a id="user-content-function-is_hex" class="anchor" aria-label="Permalink: FUNCTION is_hex" href="#function-is_hex"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>The function checks a string variable for being a hexadecimal number being a
bigint.</p>
<p>❗<span>This function needs to have
hex2bigint being installed!</span>❗</p>
<p>If you use the package, both functions are installed in the correct sort order.</p>
<div class="markdown-heading"><h4 class="heading-element">Examples</h4><a id="user-content-examples-12" class="anchor" aria-label="Permalink: Examples" href="#examples-12"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> is_hex(<span class="pl-s"><span class="pl-pds">'</span>a1b0<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;
<span class="pl-c"><span class="pl-c">--</span> Result is true</span></pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="center">res</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">t</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> is_hex(<span class="pl-s"><span class="pl-pds">'</span>a1b0w<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;
<span class="pl-c"><span class="pl-c">--</span> Result is false</span></pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="center">res</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">f</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> is_hex(<span class="pl-s"><span class="pl-pds">'</span>a1b0c3c3c3c4b5d3<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;
<span class="pl-c"><span class="pl-c">--</span> Result is false (does not fit into a bigint)</span></pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="center">res</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">f</td>
</tr>
</tbody>
</table>
<div class="markdown-heading"><h2 class="heading-element">Functions about encryption</h2><a id="user-content-functions-about-encryption" class="anchor" aria-label="Permalink: Functions about encryption" href="#functions-about-encryption"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="markdown-heading"><h3 class="heading-element">FUNCTION sha256</h3><a id="user-content-function-sha256" class="anchor" aria-label="Permalink: FUNCTION sha256" href="#function-sha256"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>Creates a function which returns a SHA256 hash for the given string.<br>
The parameter has to be converted into a binary string of <a href="https://www.postgresql.org/docs/current/static/datatype-binary.html" rel="nofollow">bytea</a>.
:heavy_exclamation_mark:<span>The function needs the <a href="https://www.postgresql.org/docs/current/static/pgcrypto.html" rel="nofollow">pgcrypto</a> package</span>❗</p>
<p>❗This function has an external dependency and is only installed, if the package pgcrypto is installed❗</p>
<div class="markdown-heading"><h4 class="heading-element">Example</h4><a id="user-content-example-1" class="anchor" aria-label="Permalink: Example" href="#example-1"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> sha256(<span class="pl-s"><span class="pl-pds">'</span>test-string<span class="pl-pds">'</span></span>::<span class="pl-k">bytea</span>) <span class="pl-k">AS</span> res;</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="center">res</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">ffe65f1d98fafedea3514adc956c8ada5980c6c5d2552fd61f48401aefd5c00e</td>
</tr>
</tbody>
</table>
<div class="markdown-heading"><h2 class="heading-element">Functions and views to get extended system information</h2><a id="user-content-functions-and-views-to-get-extended-system-information" class="anchor" aria-label="Permalink: Functions and views to get extended system information" href="#functions-and-views-to-get-extended-system-information"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="markdown-heading"><h3 class="heading-element">FUNCTION pg_schema_size</h3><a id="user-content-function-pg_schema_size" class="anchor" aria-label="Permalink: FUNCTION pg_schema_size" href="#function-pg_schema_size"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>The function returns the size for schema given as parameter in bytes.</p>
<div class="markdown-heading"><h4 class="heading-element">Examples</h4><a id="user-content-examples-13" class="anchor" aria-label="Permalink: Examples" href="#examples-13"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="highlight highlight-source-sql"><pre><span class="pl-c"><span class="pl-c">--</span> Returns the size of the schema public in bytes</span>
<span class="pl-k">SELECT</span> pg_schema_size(<span class="pl-s"><span class="pl-pds">'</span>public<span class="pl-pds">'</span></span>);</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="right">pg_schema_size</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">348536832</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-c"><span class="pl-c">--</span> Returns the size of the schema public formatted</span>
<span class="pl-k">SELECT</span> pg_size_pretty(pg_schema_size(<span class="pl-s"><span class="pl-pds">'</span>public<span class="pl-pds">'</span></span>));</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="right">pg_schema_size</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">332 MB</td>
</tr>
</tbody>
</table>
<div class="markdown-heading"><h3 class="heading-element">VIEW pg_db_views</h3><a id="user-content-view-pg_db_views" class="anchor" aria-label="Permalink: VIEW pg_db_views" href="#view-pg_db_views"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>Creates a view to get all views of the current database but excluding system views and all views which do start with "pg" or "_pg".</p>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> <span class="pl-k">*</span>
<span class="pl-k">FROM</span> pg_db_views;</pre></div>
<table>
<thead>
<tr>
<th>view_catalog</th>
<th>view_schema</th>
<th>view_name</th>
<th>view_definition</th>
</tr>
</thead>
<tbody>
<tr>
<td>chinook</td>
<td>public</td>
<td>v_json_artist_data</td>
<td>WITH tracks AS (</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>SELECT "Track"."AlbumId" AS album_id,</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>"Track"."TrackId" AS track_id,</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>"Track"."Name" AS track_name,</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>"Track"."MediaTypeId" AS media_type_id,</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>"Track"."Milliseconds" AS milliseconds,</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>"Track"."UnitPrice" AS unit_price</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>FROM "Track"</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>), json_tracks AS (</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>SELECT row_to_json(tracks.*) AS tracks</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>FROM tracks</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>), albums AS (</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>SELECT a."ArtistId" AS artist_id,</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>a."AlbumId" AS album_id,</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>a."Title" AS album_title,</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>array_agg(t.tracks) AS album_tracks</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>FROM ("Album" a</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>JOIN json_tracks t ON ((a."AlbumId" = ((t.tracks -&gt;&gt; 'album_id'::text))::integer)))</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>GROUP BY a."ArtistId", a."AlbumId", a."Title"</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>), json_albums AS (</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>SELECT albums.artist_id,</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>array_agg(row_to_json(albums.*)) AS album</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>FROM albums</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>GROUP BY albums.artist_id</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>), artists AS (</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>SELECT a."ArtistId" AS artist_id,</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>a."Name" AS artist,</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>jsa.album AS albums</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>FROM ("Artist" a</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>JOIN json_albums jsa ON ((a."ArtistId" = jsa.artist_id)))</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>)</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>SELECT (row_to_json(artists.*))::jsonb AS artist_data</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>FROM artists;</td>
</tr>
</tbody>
</table>
<div class="markdown-heading"><h3 class="heading-element">VIEW pg_foreign_keys</h3><a id="user-content-view-pg_foreign_keys" class="anchor" aria-label="Permalink: VIEW pg_foreign_keys" href="#view-pg_foreign_keys"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>Creates a view to get a list of foreign keys in the database. That includes the check for an existing single index, see boolean result of column "is_indexed".</p>
<p><span>Below PostgreSQL 11 the column "enforced" is not available and therefore not part of the result.</span></p>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> <span class="pl-k">*</span>
<span class="pl-k">FROM</span> pg_foreign_keys;</pre></div>
<table>
<thead>
<tr>
<th>constraint_name</th>
<th>is_deferrable</th>
<th>initially_deferred</th>
<th>enforced</th>
<th>table_schema</th>
<th>table_name</th>
<th>column_name</th>
<th>foreign_table_schema</th>
<th>foreign_table_name</th>
<th>foreign_column_name</th>
<th>is_indexed</th>
</tr>
</thead>
<tbody>
<tr>
<td>FK_AlbumArtistId</td>
<td>NO</td>
<td>NO</td>
<td>YES</td>
<td>public</td>
<td>Album</td>
<td>ArtistId</td>
<td>public</td>
<td>Artist</td>
<td>ArtistId</td>
<td>true</td>
</tr>
<tr>
<td>FK_CustomerSupportRepId</td>
<td>NO</td>
<td>NO</td>
<td>YES</td>
<td>public</td>
<td>Customer</td>
<td>SupportRepId</td>
<td>public</td>
<td>Employee</td>
<td>EmployeeId</td>
<td>true</td>
</tr>
<tr>
<td>FK_EmployeeReportsTo</td>
<td>NO</td>
<td>NO</td>
<td>YES</td>
<td>public</td>
<td>Employee</td>
<td>ReportsTo</td>
<td>public</td>
<td>Employee</td>
<td>EmployeeId</td>
<td>true</td>
</tr>
<tr>
<td>FK_InvoiceCustomerId</td>
<td>NO</td>
<td>NO</td>
<td>YES</td>
<td>public</td>
<td>Invoice</td>
<td>CustomerId</td>
<td>public</td>
<td>Customer</td>
<td>CustomerId</td>
<td>true</td>
</tr>
<tr>
<td>FK_InvoiceLineInvoiceId</td>
<td>NO</td>
<td>NO</td>
<td>YES</td>
<td>public</td>
<td>InvoiceLine</td>
<td>InvoiceId</td>
<td>public</td>
<td>Invoice</td>
<td>InvoiceId</td>
<td>true</td>
</tr>
<tr>
<td>FK_InvoiceLineTrackId</td>
<td>NO</td>
<td>NO</td>
<td>YES</td>
<td>public</td>
<td>InvoiceLine</td>
<td>TrackId</td>
<td>public</td>
<td>Track</td>
<td>TrackId</td>
<td>true</td>
</tr>
<tr>
<td>FK_PlaylistTrackPlaylistId</td>
<td>NO</td>
<td>NO</td>
<td>YES</td>
<td>public</td>
<td>PlaylistTrack</td>
<td>PlaylistId</td>
<td>public</td>
<td>Playlist</td>
<td>PlaylistId</td>
<td>true</td>
</tr>
<tr>
<td>FK_PlaylistTrackTrackId</td>
<td>NO</td>
<td>NO</td>
<td>YES</td>
<td>public</td>
<td>PlaylistTrack</td>
<td>TrackId</td>
<td>public</td>
<td>Track</td>
<td>TrackId</td>
<td>true</td>
</tr>
<tr>
<td>FK_TrackAlbumId</td>
<td>NO</td>
<td>NO</td>
<td>YES</td>
<td>public</td>
<td>Track</td>
<td>AlbumId</td>
<td>public</td>
<td>Album</td>
<td>AlbumId</td>
<td>true</td>
</tr>
<tr>
<td>FK_TrackGenreId</td>
<td>NO</td>
<td>NO</td>
<td>YES</td>
<td>public</td>
<td>Track</td>
<td>GenreId</td>
<td>public</td>
<td>Genre</td>
<td>GenreId</td>
<td>true</td>
</tr>
<tr>
<td>FK_TrackMediaTypeId</td>
<td>NO</td>
<td>NO</td>
<td>YES</td>
<td>public</td>
<td>Track</td>
<td>MediaTypeId</td>
<td>public</td>
<td>MediaType</td>
<td>MediaTypeId</td>
<td>true</td>
</tr>
</tbody>
</table>
<div class="markdown-heading"><h3 class="heading-element">VIEW pg_functions</h3><a id="user-content-view-pg_functions" class="anchor" aria-label="Permalink: VIEW pg_functions" href="#view-pg_functions"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>Creates a view to get all functions of the current database, excluding those in the schema pg_catalog and information_schema.</p>
<p>As there have been changes to the system tables used in this view, there are now two scripts dependend on the PostgreSQL version on which it has to be used,
one for PostgreSQL 11 or newer and one for PostgreSQL 10 or older. This is handled in the script that creates the view.</p>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> <span class="pl-k">*</span>
<span class="pl-k">FROM</span> pg_functions;</pre></div>
<table>
<thead>
<tr>
<th>schema_name</th>
<th>function_name</th>
<th>returning_data_type</th>
<th>parameters</th>
<th>function_type</th>
<th>function_comment</th>
</tr>
</thead>
<tbody>
<tr>
<td>public</td>
<td>date_de</td>
<td>character varying</td>
<td>d date</td>
<td>function</td>
<td>Creates a function which returns the given date in German format</td>
</tr>
<tr>
<td>public</td>
<td>datetime_de</td>
<td>character varying</td>
<td>t timestamp without time zone</td>
<td>function</td>
<td>Creates a function which returns the given timestamp in German format</td>
</tr>
</tbody>
</table>
<div class="markdown-heading"><h3 class="heading-element">VIEW pg_active_locks</h3><a id="user-content-view-pg_active_locks" class="anchor" aria-label="Permalink: VIEW pg_active_locks" href="#view-pg_active_locks"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>Creates a view to view all live locks with all necessary information about the connections and the query.<br>
<span>The view needs PostgreSQL 9.2 as minimum version. The column application_name was added in 9.2.</span></p>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> <span class="pl-k">*</span>
<span class="pl-k">FROM</span> pg_active_locks;</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="right">pid</th>
<th>state</th>
<th>datname</th>
<th>usename</th>
<th>application_name</th>
<th>client_addr</th>
<th>query_start</th>
<th>wait_event_type</th>
<th>wait_event</th>
<th>locktype</th>
<th>mode</th>
<th>query</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">8872</td>
<td>active</td>
<td>chinook</td>
<td>stefanie</td>
<td>psql</td>
<td>127.0.0.1</td>
<td>2018-02-18 14:45:53.943047+01</td>
<td></td>
<td></td>
<td>relation</td>
<td>AccessShareLock</td>
<td>SELECT * FROM pg_active_locks;</td>
</tr>
<tr>
<td align="right">8872</td>
<td>active</td>
<td>chinook</td>
<td>stefanie</td>
<td>psql</td>
<td>127.0.0.1</td>
<td>2018-02-18 14:45:53.943047+01</td>
<td></td>
<td></td>
<td>virtualxid</td>
<td>ExclusiveLock</td>
<td>SELECT * FROM pg_active_locks;</td>
</tr>
</tbody>
</table>
<div class="markdown-heading"><h3 class="heading-element">VIEW pg_table_matview_infos</h3><a id="user-content-view-pg_table_matview_infos" class="anchor" aria-label="Permalink: VIEW pg_table_matview_infos" href="#view-pg_table_matview_infos"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>Creates a view with information about the size of the table/materialized view and sizes of indexes on that table/materialized view.
It does also list all indexes on that table in an array.</p>
<div class="markdown-heading"><h4 class="heading-element">List of supported object types</h4><a id="user-content-list-of-supported-object-types" class="anchor" aria-label="Permalink: List of supported object types" href="#list-of-supported-object-types"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<table>
<thead>
<tr>
<th>object type</th>
<th align="center">&lt;=10</th>
<th align="center">&gt;=11</th>
</tr>
</thead>
<tbody>
<tr>
<td>PARTITIONED INDEX</td>
<td align="center"></td>
<td align="center">X</td>
</tr>
<tr>
<td>SEQUENCE</td>
<td align="center">X</td>
<td align="center">X</td>
</tr>
<tr>
<td>COMPOSITE TYPE</td>
<td align="center">X</td>
<td align="center">X</td>
</tr>
<tr>
<td>FOREIGN TABLE</td>
<td align="center">X</td>
<td align="center">X</td>
</tr>
<tr>
<td>INDEX</td>
<td align="center">X</td>
<td align="center">X</td>
</tr>
<tr>
<td>MATERIALIZED VIEW</td>
<td align="center">X</td>
<td align="center">X</td>
</tr>
<tr>
<td>PARTITIONED TABLE</td>
<td align="center">X</td>
<td align="center">X</td>
</tr>
<tr>
<td>TABLE</td>
<td align="center">X</td>
<td align="center">X</td>
</tr>
<tr>
<td>VIEW</td>
<td align="center">X</td>
<td align="center">X</td>
</tr>
<tr>
<td>DATABASE</td>
<td align="center">X</td>
<td align="center">X</td>
</tr>
<tr>
<td>EXTENSION</td>
<td align="center">X</td>
<td align="center">X</td>
</tr>
<tr>
<td>FOREIGN DATA WRAPPER</td>
<td align="center">X</td>
<td align="center">X</td>
</tr>
<tr>
<td>FOREIGN SERVER</td>
<td align="center">X</td>
<td align="center">X</td>
</tr>
<tr>
<td>LANGUAGE</td>
<td align="center">X</td>
<td align="center">X</td>
</tr>
<tr>
<td>SCHEMA</td>
<td align="center">X</td>
<td align="center">X</td>
</tr>
<tr>
<td>OPERATOR CLASS</td>
<td align="center"></td>
<td align="center">X</td>
</tr>
<tr>
<td>PROCEDURE</td>
<td align="center"></td>
<td align="center">X</td>
</tr>
<tr>
<td>AGGREGATE FUNCTION</td>
<td align="center"></td>
<td align="center">X</td>
</tr>
<tr>
<td>WINDOW FUNCTION</td>
<td align="center"></td>
<td align="center">X</td>
</tr>
<tr>
<td>COLLATION</td>
<td align="center">X</td>
<td align="center">X</td>
</tr>
<tr>
<td>CONVERSION</td>
<td align="center">X</td>
<td align="center">X</td>
</tr>
<tr>
<td>EVENT TRIGGER</td>
<td align="center">X</td>
<td align="center">X</td>
</tr>
<tr>
<td>OPERATION FAMILY</td>
<td align="center">X</td>
<td align="center">X</td>
</tr>
<tr>
<td>PUBLICATIONS</td>
<td align="center">X</td>
<td align="center">X</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> <span class="pl-k">*</span>
<span class="pl-k">FROM</span> pg_table_matview_infos;</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th>type</th>
<th>schemaname</th>
<th>tablename</th>
<th>tableowner</th>
<th>tablespace</th>
<th>indexes</th>
<th align="right">table_size</th>
<th align="right">indexes_size</th>
<th align="right">total_relation_size</th>
<th align="right">table_size_pretty</th>
<th align="right">indexes_size_pretty</th>
<th align="right">total_relation_size_pretty</th>
</tr>
</thead>
<tbody>
<tr>
<td>table</td>
<td>public</td>
<td>MediaType</td>
<td>stefanie</td>
<td>[NULL]</td>
<td>{PK_MediaType}</td>
<td align="right">8192</td>
<td align="right">16384</td>
<td align="right">24576</td>
<td align="right">8192 bytes</td>
<td align="right">16 kB</td>
<td align="right">24 kB</td>
</tr>
<tr>
<td>table</td>
<td>public</td>
<td>Playlist</td>
<td>stefanie</td>
<td>[NULL]</td>
<td>{PK_Playlist}</td>
<td align="right">8192</td>
<td align="right">16384</td>
<td align="right">24576</td>
<td align="right">8192 bytes</td>
<td align="right">16 kB</td>
<td align="right">24 kB</td>
</tr>
</tbody>
</table>
<div class="markdown-heading"><h3 class="heading-element">VIEW pg_object_ownership</h3><a id="user-content-view-pg_object_ownership" class="anchor" aria-label="Permalink: VIEW pg_object_ownership" href="#view-pg_object_ownership"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>Creates a view with information about the ownership of objects.
Since PostgreSQL 11 supports procedures, therefore there is one version vor PostgreSQL 10. This view is supported in PostgreSQL 10 or newer.  Older versions are not supported.</p>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> <span class="pl-k">*</span>
<span class="pl-k">FROM</span> pg_object_ownership
<span class="pl-k">WHERE</span> owner <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>stefanie<span class="pl-pds">'</span></span>;</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="right">oid</th>
<th>object_schema</th>
<th>object_name</th>
<th>owner</th>
<th>object_type</th>
<th align="center">deptype</th>
<th>dependency_type</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">17078</td>
<td>public</td>
<td>pg_object_ownership</td>
<td>stefanie</td>
<td>VIEW</td>
<td align="center">n</td>
<td>DEPENDENCY_NORMAL</td>
</tr>
<tr>
<td align="right">17079</td>
<td>public</td>
<td>gapfillinternal</td>
<td>stefanie</td>
<td>FUNCTION</td>
<td align="center">n</td>
<td>DEPENDENCY_NORMAL</td>
</tr>
<tr>
<td align="right">18028</td>
<td>public</td>
<td>gapfill</td>
<td>stefanie</td>
<td>AGGREGATE FUNCTION</td>
<td align="center">n</td>
<td>DEPENDENCY_NORMAL</td>
</tr>
<tr>
<td align="right">18039</td>
<td>public</td>
<td>to_unix_timestamp</td>
<td>stefanie</td>
<td>FUNCTION</td>
<td align="center">n</td>
<td>DEPENDENCY_NORMAL</td>
</tr>
<tr>
<td align="right">18068</td>
<td>public</td>
<td>to_unix_timestamp</td>
<td>stefanie</td>
<td>FUNCTION</td>
<td align="center">n</td>
<td>DEPENDENCY_NORMAL</td>
</tr>
</tbody>
</table>
<div class="markdown-heading"><h3 class="heading-element">VIEW pg_partitioned_tables_infos</h3><a id="user-content-view-pg_partitioned_tables_infos" class="anchor" aria-label="Permalink: VIEW pg_partitioned_tables_infos" href="#view-pg_partitioned_tables_infos"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>Creates a view to get information about partitioned tables.
Since PostgreSQL 10 supports partitions, but they became usable only in later versions. A system table to identify partitions has been added in PostgreSQL 11. Therefore this view is only available on systems with PostgreSQL 11 or newer.</p>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> <span class="pl-k">*</span>
<span class="pl-k">FROM</span> pg_partitioned_tables_infos;</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="right">parent_relid</th>
<th>parent_schemaname</th>
<th>parent_tablename</th>
<th>parent_owner</th>
<th>partition_strategy</th>
<th align="right">count_o_partitions</th>
<th align="right">overall_size</th>
<th>child_relid</th>
<th>child_schemaname</th>
<th>child_tablename</th>
<th>child_owner</th>
<th>child_size</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">16389</td>
<td>test</td>
<td>parted</td>
<td>stefanie</td>
<td>LIST</td>
<td align="right">3</td>
<td align="right">0</td>
<td>16396</td>
<td>test</td>
<td>parted_part_1</td>
<td>stefanie</td>
<td>0</td>
</tr>
<tr>
<td align="right">16389</td>
<td>test</td>
<td>parted</td>
<td>stefanie</td>
<td>LIST</td>
<td align="right">3</td>
<td align="right">0</td>
<td>16406</td>
<td>test</td>
<td>parted_part_2</td>
<td>stefanie</td>
<td>0</td>
</tr>
<tr>
<td align="right">16389</td>
<td>test</td>
<td>parted</td>
<td>stefanie</td>
<td>LIST</td>
<td align="right">3</td>
<td align="right">0</td>
<td>16416</td>
<td>test</td>
<td>parted_part_3</td>
<td>stefanie</td>
<td>0</td>
</tr>
<tr>
<td align="right">16441</td>
<td>test</td>
<td>parted_test2</td>
<td>stefanie</td>
<td>HASH</td>
<td align="right">0</td>
<td align="right">0</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<div class="markdown-heading"><h2 class="heading-element">Functions about encodings</h2><a id="user-content-functions-about-encodings" class="anchor" aria-label="Permalink: Functions about encodings" href="#functions-about-encodings"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="markdown-heading"><h3 class="heading-element">FUNCTION is_encoding</h3><a id="user-content-function-is_encoding" class="anchor" aria-label="Permalink: FUNCTION is_encoding" href="#function-is_encoding"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>The function checks if all characters are in included in a given encoding.
That is especially useful, if you have to deal with exports into other
encodings than the database encoding.</p>
<p>The function with two parameters uses UTF-8 as source encoding,<br>
The one with three parameters uses the third parameter as source encoding.</p>
<div class="markdown-heading"><h4 class="heading-element">Examples</h4><a id="user-content-examples-14" class="anchor" aria-label="Permalink: Examples" href="#examples-14"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> is_encoding(<span class="pl-s"><span class="pl-pds">'</span>Some characters<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>LATIN1<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="center">res</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">f</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> is_encoding(<span class="pl-s"><span class="pl-pds">'</span>Some characters, ğ is Turkish and not latin1<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>LATIN1<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;
<span class="pl-c"><span class="pl-c">--</span> Returns false: The Turkish character ğ is not part of latin1</span></pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="center">res</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">f</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> is_encoding(<span class="pl-s"><span class="pl-pds">'</span>Some characters<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>LATIN1<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>UTF8<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="center">res</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">t</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> is_encoding(<span class="pl-s"><span class="pl-pds">'</span>Some characters, ğ is Turkish and not latin1<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>UTF8<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>LATIN1<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;
<span class="pl-c"><span class="pl-c">--</span> Returns false: The Turkish character ğ is not part of latin1</span></pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="center">res</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">f</td>
</tr>
</tbody>
</table>
<div class="markdown-heading"><h3 class="heading-element">FUNCTION is_latin1</h3><a id="user-content-function-is_latin1" class="anchor" aria-label="Permalink: FUNCTION is_latin1" href="#function-is_latin1"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>The function is a shortcut for is_encoding('Some characters', 'LATIN1'), you
don't have to give the target encoding.</p>
<div class="markdown-heading"><h4 class="heading-element">Examples</h4><a id="user-content-examples-15" class="anchor" aria-label="Permalink: Examples" href="#examples-15"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> is_latin1(<span class="pl-s"><span class="pl-pds">'</span>Some characters<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="center">res</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">t</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> is_latin1(<span class="pl-s"><span class="pl-pds">'</span>Some characters, ğ is Turkish and not latin1<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;
<span class="pl-c"><span class="pl-c">--</span> Returns false: The Turkish character ğ is not part of latin1</span></pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="center">res</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">f</td>
</tr>
</tbody>
</table>
<div class="markdown-heading"><h3 class="heading-element">FUNCTION return_not_part_of_latin1</h3><a id="user-content-function-return_not_part_of_latin1" class="anchor" aria-label="Permalink: FUNCTION return_not_part_of_latin1" href="#function-return_not_part_of_latin1"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>The function returns a distinct array containing all characters, which are not defined in latin1.<br>
The function <span>depends on is_latin1</span> which is part of this repository.</p>
<div class="markdown-heading"><h4 class="heading-element">Example</h4><a id="user-content-example-2" class="anchor" aria-label="Permalink: Example" href="#example-2"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="highlight highlight-source-sql"><pre><span class="pl-c"><span class="pl-c">--</span> Returns an array containing the characters ğ and Ƶ each one time</span>
<span class="pl-k">SELECT</span> return_not_part_of_latin1(<span class="pl-s"><span class="pl-pds">'</span>ağbƵcğeƵ<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th>res</th>
</tr>
</thead>
<tbody>
<tr>
<td>{ğ,Ƶ}</td>
</tr>
</tbody>
</table>
<div class="markdown-heading"><h3 class="heading-element">FUNCTION replace_latin1</h3><a id="user-content-function-replace_latin1" class="anchor" aria-label="Permalink: FUNCTION replace_latin1" href="#function-replace_latin1"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>The function has three implementations. All implementations <span>depend on the function is_latin1</span>, the function is included in this repository.</p>
<div class="markdown-heading"><h4 class="heading-element">replace_latin1(s text)</h4><a id="user-content-replace_latin1s-text" class="anchor" aria-label="Permalink: replace_latin1(s text)" href="#replace_latin1s-text"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>The function takes one parameter with characters to be checked and replaced with
an empty string, if they are not part of latin1.</p>
<div class="markdown-heading"><h5 class="heading-element">Example</h5><a id="user-content-example-3" class="anchor" aria-label="Permalink: Example" href="#example-3"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> replace_latin1(<span class="pl-s"><span class="pl-pds">'</span>Some characters, ğ is Turkish and not latin1<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th>res</th>
</tr>
</thead>
<tbody>
<tr>
<td>Some characters,  is Turkish and not latin1</td>
</tr>
</tbody>
</table>
<div class="markdown-heading"><h4 class="heading-element">replace_latin1(s text, replacement text)</h4><a id="user-content-replace_latin1s-text-replacement-text" class="anchor" aria-label="Permalink: replace_latin1(s text, replacement text)" href="#replace_latin1s-text-replacement-text"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>The function takes a second parameter which is used to replace <em>all</em> characters,
which are not part of latin1.</p>
<div class="markdown-heading"><h5 class="heading-element">Example</h5><a id="user-content-example-4" class="anchor" aria-label="Permalink: Example" href="#example-4"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> replace_latin1(
  <span class="pl-s"><span class="pl-pds">'</span>Some characters, ğ is Turkish and not latin1 and replaced with a g<span class="pl-pds">'</span></span>,
  <span class="pl-s"><span class="pl-pds">'</span>g<span class="pl-pds">'</span></span>
) <span class="pl-k">AS</span> res;</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th>res</th>
</tr>
</thead>
<tbody>
<tr>
<td>Some characters, g is Turkish and not latin1 and replaced with a g</td>
</tr>
</tbody>
</table>
<div class="markdown-heading"><h4 class="heading-element">replace_latin1(s text, s_search text[], s_replace text[])</h4><a id="user-content-replace_latin1s-text-s_search-text-s_replace-text" class="anchor" aria-label="Permalink: replace_latin1(s text, s_search text[], s_replace text[])" href="#replace_latin1s-text-s_search-text-s_replace-text"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>The function takes as first parameter a string which may or may not have none
latin1 characters. The second parameter is an arrays containing all characters,
that should be replaced. The third parameter is an array, too. The characters
defined in s_search are replaced with the characters in s_replace, it takes the
position in the array to identify which character should be replaced by which
one.</p>
<div class="markdown-heading"><h5 class="heading-element">Example</h5><a id="user-content-example-5" class="anchor" aria-label="Permalink: Example" href="#example-5"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="highlight highlight-source-sql"><pre><span class="pl-c"><span class="pl-c">--</span> First identify the characters which should be replaced, which are {ğ,Ƶ}</span>
<span class="pl-k">SELECT</span> return_not_part_of_latin1(<span class="pl-s"><span class="pl-pds">'</span>ağbƵcğeƵ<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;

<span class="pl-c"><span class="pl-c">--</span> The ğ will be replaced whit a g and the Ƶ with a Z}</span>
<span class="pl-k">SELECT</span> <span class="pl-s"><span class="pl-pds">'</span>ağbƵcğeƵ<span class="pl-pds">'</span></span> <span class="pl-k">AS</span> original
  , replace_latin1(
      <span class="pl-s"><span class="pl-pds">'</span>ağbƵcğeƵ<span class="pl-pds">'</span></span>,
      string_to_array(<span class="pl-s"><span class="pl-pds">'</span>ğ,Ƶ<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>,<span class="pl-pds">'</span></span>),
      string_to_array(<span class="pl-s"><span class="pl-pds">'</span>g,Z<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>,<span class="pl-pds">'</span></span>)
    ) <span class="pl-k">AS</span> res;</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th>original</th>
<th>res</th>
</tr>
</thead>
<tbody>
<tr>
<td>ağbƵcğeƵ</td>
<td>agbZcgeZ</td>
</tr>
</tbody>
</table>
<div class="markdown-heading"><h3 class="heading-element">FUNCTION return_not_part_of_encoding</h3><a id="user-content-function-return_not_part_of_encoding" class="anchor" aria-label="Permalink: FUNCTION return_not_part_of_encoding" href="#function-return_not_part_of_encoding"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>The function returns a distinct array containing all characters, which are not defined in the second parameter as encoding.<br>
The function <span>depends on is_encoding</span> which is part of this repository.</p>
<div class="markdown-heading"><h4 class="heading-element">Example</h4><a id="user-content-example-6" class="anchor" aria-label="Permalink: Example" href="#example-6"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="highlight highlight-source-sql"><pre><span class="pl-c"><span class="pl-c">--</span> Returns an array containing the characters ğ and Ƶ each one time</span>
<span class="pl-k">SELECT</span> return_not_part_of_encoding(<span class="pl-s"><span class="pl-pds">'</span>ağbƵcğeƵ<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>latin1<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th>res</th>
</tr>
</thead>
<tbody>
<tr>
<td>{ğ,Ƶ}</td>
</tr>
</tbody>
</table>
<div class="markdown-heading"><h3 class="heading-element">FUNCTION replace_encoding</h3><a id="user-content-function-replace_encoding" class="anchor" aria-label="Permalink: FUNCTION replace_encoding" href="#function-replace_encoding"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>The function has three implementations. All implementations <span>depend on the function is_encoding</span>, the function is included in this repository.</p>
<div class="markdown-heading"><h4 class="heading-element">replace_encoding(s text, e text)</h4><a id="user-content-replace_encodings-text-e-text" class="anchor" aria-label="Permalink: replace_encoding(s text, e text)" href="#replace_encodings-text-e-text"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>The function takes one parameter with characters to be checked and replaced with
an empty string, if they are not part of the encoding given in the second
parameter.</p>
<div class="markdown-heading"><h5 class="heading-element">Example</h5><a id="user-content-example-7" class="anchor" aria-label="Permalink: Example" href="#example-7"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> replace_encoding(
  <span class="pl-s"><span class="pl-pds">'</span>Some characters, ğ is Turkish and not latin1<span class="pl-pds">'</span></span>,
  <span class="pl-s"><span class="pl-pds">'</span>latin1<span class="pl-pds">'</span></span>
) <span class="pl-k">AS</span> res;</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th>res</th>
</tr>
</thead>
<tbody>
<tr>
<td>Some characters,  is Turkish and not latin1</td>
</tr>
</tbody>
</table>
<div class="markdown-heading"><h4 class="heading-element">replace_encoding(s text, e text, replacement text)</h4><a id="user-content-replace_encodings-text-e-text-replacement-text" class="anchor" aria-label="Permalink: replace_encoding(s text, e text, replacement text)" href="#replace_encodings-text-e-text-replacement-text"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>The function takes a third parameter which is used to replace <em>all</em> characters
which are not part of the encoding given in parameter 2.</p>
<div class="markdown-heading"><h5 class="heading-element">Example</h5><a id="user-content-example-8" class="anchor" aria-label="Permalink: Example" href="#example-8"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> replace_encoding(
  <span class="pl-s"><span class="pl-pds">'</span>Some characters, ğ is Turkish and not latin1 and replaced with a g<span class="pl-pds">'</span></span>,
  <span class="pl-s"><span class="pl-pds">'</span>latin1<span class="pl-pds">'</span></span>,
  <span class="pl-s"><span class="pl-pds">'</span>g<span class="pl-pds">'</span></span>
) <span class="pl-k">AS</span> res;</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th>res</th>
</tr>
</thead>
<tbody>
<tr>
<td>Some characters, g is Turkish and not latin1 and replaced with a g</td>
</tr>
</tbody>
</table>
<div class="markdown-heading"><h4 class="heading-element">replace_encoding(s text, s_search text[], s_replace text[])</h4><a id="user-content-replace_encodings-text-s_search-text-s_replace-text" class="anchor" aria-label="Permalink: replace_encoding(s text, s_search text[], s_replace text[])" href="#replace_encodings-text-s_search-text-s_replace-text"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>The function takes as first parameter a string which may or may not have none
latin1 characters. The second parameter is an arrays containing all characters,
that should be replaced. The third parameter is an array, too. The characters
defined in s_search are replaced with the characters in s_replace, it takes the
position in the array to identify which character should be replaced by which
one.</p>
<div class="markdown-heading"><h5 class="heading-element">Example</h5><a id="user-content-example-9" class="anchor" aria-label="Permalink: Example" href="#example-9"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="highlight highlight-source-sql"><pre><span class="pl-c"><span class="pl-c">--</span> First identify the characters which should be replaced, which are {ğ,Ƶ}</span>
<span class="pl-k">SELECT</span> return_not_part_of_latin1(<span class="pl-s"><span class="pl-pds">'</span>ağbƵcğeƵ<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> res;

<span class="pl-c"><span class="pl-c">--</span> The ğ will be replaced whit a g and the Ƶ with a Z}</span>
<span class="pl-k">SELECT</span> <span class="pl-s"><span class="pl-pds">'</span>ağbƵcğeƵ<span class="pl-pds">'</span></span> <span class="pl-k">AS</span> original
  , replace_encoding(
      <span class="pl-s"><span class="pl-pds">'</span>ağbƵcğeƵ<span class="pl-pds">'</span></span>,
      string_to_array(<span class="pl-s"><span class="pl-pds">'</span>ğ,Ƶ<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>,<span class="pl-pds">'</span></span>),
      string_to_array(<span class="pl-s"><span class="pl-pds">'</span>g,Z<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>,<span class="pl-pds">'</span></span>)
  ) <span class="pl-k">AS</span> res;</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th>original</th>
<th>res</th>
</tr>
</thead>
<tbody>
<tr>
<td>ağbƵcğeƵ</td>
<td>agbZcgeZ</td>
</tr>
</tbody>
</table>
<div class="markdown-heading"><h2 class="heading-element">User defined aggregates</h2><a id="user-content-user-defined-aggregates" class="anchor" aria-label="Permalink: User defined aggregates" href="#user-defined-aggregates"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="markdown-heading"><h3 class="heading-element">AGGREGATE gap_fill</h3><a id="user-content-aggregate-gap_fill" class="anchor" aria-label="Permalink: AGGREGATE gap_fill" href="#aggregate-gap_fill"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>The aggregate is used in <a href="https://www.postgresql.org/docs/current/static/tutorial-window.html" rel="nofollow">Window Functions</a>
to show the last value in case the current value is null.</p>
<div class="markdown-heading"><h4 class="heading-element">Example</h4><a id="user-content-example-10" class="anchor" aria-label="Permalink: Example" href="#example-10"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">BEGIN</span>;

<span class="pl-k">CREATE</span> <span class="pl-k">TABLE</span> <span class="pl-en">test_gap_fill</span>(id <span class="pl-k">INTEGER</span>, some_value <span class="pl-k">text</span>);

<span class="pl-k">INSERT INTO</span> test_gap_fill(id, some_value) <span class="pl-k">VALUES</span>
  (<span class="pl-c1">1</span>, <span class="pl-s"><span class="pl-pds">'</span>value 1<span class="pl-pds">'</span></span>),
  (<span class="pl-c1">1</span>, <span class="pl-k">NULL</span>),
  (<span class="pl-c1">2</span>, <span class="pl-s"><span class="pl-pds">'</span>value 2<span class="pl-pds">'</span></span>),
  (<span class="pl-c1">2</span>, <span class="pl-k">NULL</span>),
  (<span class="pl-c1">2</span>, <span class="pl-k">NULL</span>),
  (<span class="pl-c1">3</span>, <span class="pl-s"><span class="pl-pds">'</span>value 3<span class="pl-pds">'</span></span>)
;

<span class="pl-k">SELECT</span> id
  , some_value
<span class="pl-k">FROM</span> test_gap_fill
;

<span class="pl-k">ROLLBACK</span>;</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="right">id</th>
<th>some_value</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">1</td>
<td>value 1</td>
</tr>
<tr>
<td align="right">1</td>
<td></td>
</tr>
<tr>
<td align="right">2</td>
<td>value 2</td>
</tr>
<tr>
<td align="right">2</td>
<td></td>
</tr>
<tr>
<td align="right">2</td>
<td></td>
</tr>
<tr>
<td align="right">3</td>
<td>value 3</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">BEGIN</span>;

<span class="pl-k">CREATE</span> <span class="pl-k">TABLE</span> <span class="pl-en">test_gap_fill</span>(id <span class="pl-k">INTEGER</span>, some_value <span class="pl-k">text</span>);

<span class="pl-k">INSERT INTO</span> test_gap_fill(id, some_value) <span class="pl-k">VALUES</span>
  (<span class="pl-c1">1</span>, <span class="pl-s"><span class="pl-pds">'</span>value 1<span class="pl-pds">'</span></span>),
  (<span class="pl-c1">1</span>, <span class="pl-k">NULL</span>),
  (<span class="pl-c1">2</span>, <span class="pl-s"><span class="pl-pds">'</span>value 2<span class="pl-pds">'</span></span>),
  (<span class="pl-c1">2</span>, <span class="pl-k">NULL</span>),
  (<span class="pl-c1">2</span>, <span class="pl-k">NULL</span>),
  (<span class="pl-c1">3</span>, <span class="pl-s"><span class="pl-pds">'</span>value 3<span class="pl-pds">'</span></span>)
;

<span class="pl-c"><span class="pl-c">--</span> Fill the empty rows with values</span>
<span class="pl-k">SELECT</span> id
  , gap_fill(some_value) OVER (<span class="pl-k">ORDER BY</span> id) <span class="pl-k">AS</span> some_value
<span class="pl-k">FROM</span> test_gap_fill
;

<span class="pl-k">ROLLBACK</span>;</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="right">id</th>
<th>some_value</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">1</td>
<td>value 1</td>
</tr>
<tr>
<td align="right">1</td>
<td>value 1</td>
</tr>
<tr>
<td align="right">2</td>
<td>value 2</td>
</tr>
<tr>
<td align="right">2</td>
<td>value 2</td>
</tr>
<tr>
<td align="right">2</td>
<td>value 2</td>
</tr>
<tr>
<td align="right">3</td>
<td>value 3</td>
</tr>
</tbody>
</table>
<div class="markdown-heading"><h3 class="heading-element">AGGREGATE array_min</h3><a id="user-content-aggregate-array_min" class="anchor" aria-label="Permalink: AGGREGATE array_min" href="#aggregate-array_min"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>Calculate minimum values from arrays.</p>
<p>Supported data types are SMALLINT, INTEGER, BIGINT, REAL, DOUBLE PRECISION, NUMERIC, and TEXT;</p>
<div class="markdown-heading"><h4 class="heading-element">Examples</h4><a id="user-content-examples-16" class="anchor" aria-label="Permalink: Examples" href="#examples-16"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> array_min(ARRAY[<span class="pl-c1">45</span>, <span class="pl-c1">60</span>, <span class="pl-c1">43</span>, <span class="pl-c1">99</span>]::<span class="pl-k">SMALLINT</span>[]);</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="right">array_min</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">43</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> array_min(ARRAY[<span class="pl-c1">45</span>, <span class="pl-c1">60</span>, <span class="pl-c1">43</span>, <span class="pl-c1">99</span>]::<span class="pl-k">INTEGER</span>[]);</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="right">array_min</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">43</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> array_min(ARRAY[<span class="pl-c1">45</span>, <span class="pl-c1">60</span>, <span class="pl-c1">43</span>, <span class="pl-c1">99</span>]::<span class="pl-k">BIGINT</span>[]);</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="right">array_min</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">43</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> array_min(ARRAY[<span class="pl-c1">45</span>.<span class="pl-c1">6</span>, <span class="pl-c1">60</span>.<span class="pl-c1">8</span>, <span class="pl-c1">43</span>.<span class="pl-c1">7</span>, <span class="pl-c1">99</span>.<span class="pl-c1">3</span>]::<span class="pl-k">REAL</span>[]);</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="right">array_min</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">43.7</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> array_min(ARRAY[<span class="pl-c1">45</span>.<span class="pl-c1">6</span>, <span class="pl-c1">60</span>.<span class="pl-c1">8</span>, <span class="pl-c1">43</span>.<span class="pl-c1">7</span>, <span class="pl-c1">99</span>.<span class="pl-c1">3</span>]::<span class="pl-k">DOUBLE PRECISION</span>[]);</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="right">array_min</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">43.7</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> array_min(ARRAY[<span class="pl-c1">45</span>.<span class="pl-c1">6</span>, <span class="pl-c1">60</span>.<span class="pl-c1">8</span>, <span class="pl-c1">43</span>.<span class="pl-c1">7</span>, <span class="pl-c1">99</span>.<span class="pl-c1">3</span>]::<span class="pl-k">NUMERIC</span>[]);</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="right">array_min</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">43.7</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> array_min(ARRAY[<span class="pl-s"><span class="pl-pds">'</span>def<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>abc<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>ghi<span class="pl-pds">'</span></span>]::<span class="pl-k">TEXT</span>[]);</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th>array_min</th>
</tr>
</thead>
<tbody>
<tr>
<td>abc</td>
</tr>
</tbody>
</table>
<div class="markdown-heading"><h3 class="heading-element">AGGREGATE array_max</h3><a id="user-content-aggregate-array_max" class="anchor" aria-label="Permalink: AGGREGATE array_max" href="#aggregate-array_max"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>Calculate maximum values from arrays.</p>
<p>Supported data types are SMALLINT, INTEGER, BIGINT, REAL, DOUBLE PRECISION, NUMERIC, and TEXT;</p>
<div class="markdown-heading"><h4 class="heading-element">Examples</h4><a id="user-content-examples-17" class="anchor" aria-label="Permalink: Examples" href="#examples-17"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> array_max(ARRAY[<span class="pl-c1">45</span>, <span class="pl-c1">60</span>, <span class="pl-c1">43</span>, <span class="pl-c1">99</span>]::<span class="pl-k">SMALLINT</span>[]);</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="right">array_max</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">99</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> array_max(ARRAY[<span class="pl-c1">45</span>, <span class="pl-c1">60</span>, <span class="pl-c1">43</span>, <span class="pl-c1">99</span>]::<span class="pl-k">INTEGER</span>[]);</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="right">array_max</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">99</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> array_max(ARRAY[<span class="pl-c1">45</span>, <span class="pl-c1">60</span>, <span class="pl-c1">43</span>, <span class="pl-c1">99</span>]::<span class="pl-k">BIGINT</span>[]);</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="right">array_max</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">99</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> array_max(ARRAY[<span class="pl-c1">45</span>.<span class="pl-c1">6</span>, <span class="pl-c1">60</span>.<span class="pl-c1">8</span>, <span class="pl-c1">43</span>, <span class="pl-c1">99</span>.<span class="pl-c1">3</span>]::<span class="pl-k">REAL</span>[]);</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="right">array_max</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">99.3</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> array_max(ARRAY[<span class="pl-c1">45</span>.<span class="pl-c1">6</span>, <span class="pl-c1">60</span>.<span class="pl-c1">8</span>, <span class="pl-c1">43</span>, <span class="pl-c1">99</span>.<span class="pl-c1">3</span>]::<span class="pl-k">DOUBLE PRECISION</span>[]);</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="right">array_max</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">99.3</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> array_max(ARRAY[<span class="pl-c1">45</span>.<span class="pl-c1">6</span>, <span class="pl-c1">60</span>.<span class="pl-c1">8</span>, <span class="pl-c1">43</span>, <span class="pl-c1">99</span>.<span class="pl-c1">3</span>]::<span class="pl-k">NUMERIC</span>[]);</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="right">array_max</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">99.3</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> array_max(ARRAY[<span class="pl-s"><span class="pl-pds">'</span>def<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>abc<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>ghi<span class="pl-pds">'</span></span>]::<span class="pl-k">TEXT</span>[]);</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th>array_max</th>
</tr>
</thead>
<tbody>
<tr>
<td>ghi</td>
</tr>
</tbody>
</table>
<div class="markdown-heading"><h3 class="heading-element">AGGREGATE array_avg</h3><a id="user-content-aggregate-array_avg" class="anchor" aria-label="Permalink: AGGREGATE array_avg" href="#aggregate-array_avg"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>Calculate average values from arrays.</p>
<p>Supported data types are SMALLINT, INTEGER, BIGINT, REAL, DOUBLE PRECISION, and NUMERIC;</p>
<div class="markdown-heading"><h4 class="heading-element">Examples</h4><a id="user-content-examples-18" class="anchor" aria-label="Permalink: Examples" href="#examples-18"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> array_avg(ARRAY[<span class="pl-c1">45</span>, <span class="pl-c1">60</span>, <span class="pl-c1">43</span>, <span class="pl-c1">99</span>]::<span class="pl-k">SMALLINT</span>[]);</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="right">array_avg</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">62</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> array_avg(ARRAY[<span class="pl-c1">45</span>, <span class="pl-c1">60</span>, <span class="pl-c1">43</span>, <span class="pl-c1">99</span>]::<span class="pl-k">INTEGER</span>[]);</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="right">array_avg</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">62</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> array_avg(ARRAY[<span class="pl-c1">45</span>, <span class="pl-c1">60</span>, <span class="pl-c1">43</span>, <span class="pl-c1">99</span>]::<span class="pl-k">BIGINT</span>[]);</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="right">array_avg</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">62</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> array_avg(ARRAY[<span class="pl-c1">45</span>.<span class="pl-c1">6</span>, <span class="pl-c1">60</span>.<span class="pl-c1">8</span>, <span class="pl-c1">43</span>, <span class="pl-c1">99</span>.<span class="pl-c1">3</span>]::<span class="pl-k">REAL</span>[]);</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="right">array_avg</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">62.1750001907349</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> array_avg(ARRAY[<span class="pl-c1">45</span>.<span class="pl-c1">6</span>, <span class="pl-c1">60</span>.<span class="pl-c1">8</span>, <span class="pl-c1">43</span>, <span class="pl-c1">99</span>.<span class="pl-c1">3</span>]::<span class="pl-k">DOUBLE PRECISION</span>[]);</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="right">array_avg</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">62.175</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> array_avg(ARRAY[<span class="pl-c1">45</span>.<span class="pl-c1">6</span>, <span class="pl-c1">60</span>.<span class="pl-c1">8</span>, <span class="pl-c1">43</span>, <span class="pl-c1">99</span>.<span class="pl-c1">3</span>]::<span class="pl-k">NUMERIC</span>[]);</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="right">array_avg</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">62.1750000000000000</td>
</tr>
</tbody>
</table>
<div class="markdown-heading"><h3 class="heading-element">AGGREGATE array_sum</h3><a id="user-content-aggregate-array_sum" class="anchor" aria-label="Permalink: AGGREGATE array_sum" href="#aggregate-array_sum"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>Calculate sum of values from arrays.</p>
<p>Supported data types are SMALLINT, INTEGER, BIGINT, REAL, DOUBLE PRECISION, and, NUMERIC;</p>
<div class="markdown-heading"><h4 class="heading-element">Examples</h4><a id="user-content-examples-19" class="anchor" aria-label="Permalink: Examples" href="#examples-19"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> array_sum(ARRAY[<span class="pl-c1">45</span>, <span class="pl-c1">60</span>, <span class="pl-c1">43</span>, <span class="pl-c1">99</span>]::<span class="pl-k">SMALLINT</span>[]);</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="right">array_sum</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">247</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> array_sum(ARRAY[<span class="pl-c1">45</span>, <span class="pl-c1">60</span>, <span class="pl-c1">43</span>, <span class="pl-c1">99</span>]::<span class="pl-k">INTEGER</span>[]);</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="right">array_sum</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">247</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> array_sum(ARRAY[<span class="pl-c1">45</span>, <span class="pl-c1">60</span>, <span class="pl-c1">43</span>, <span class="pl-c1">99</span>]::<span class="pl-k">BIGINT</span>[]);</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="right">array_sum</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">247</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> array_sum(ARRAY[<span class="pl-c1">45</span>.<span class="pl-c1">6</span>, <span class="pl-c1">60</span>.<span class="pl-c1">8</span>, <span class="pl-c1">43</span>.<span class="pl-c1">7</span>, <span class="pl-c1">99</span>.<span class="pl-c1">3</span>]::<span class="pl-k">REAL</span>[]);</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="right">array_sum</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">249.4</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> array_sum(ARRAY[<span class="pl-c1">45</span>.<span class="pl-c1">6</span>, <span class="pl-c1">60</span>.<span class="pl-c1">8</span>, <span class="pl-c1">43</span>.<span class="pl-c1">7</span>, <span class="pl-c1">99</span>.<span class="pl-c1">3</span>]::<span class="pl-k">DOUBLE PRECISION</span>[]);</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="right">array_sum</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">249.4</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> array_sum(ARRAY[<span class="pl-c1">45</span>.<span class="pl-c1">6</span>, <span class="pl-c1">60</span>.<span class="pl-c1">8</span>, <span class="pl-c1">43</span>.<span class="pl-c1">7</span>, <span class="pl-c1">99</span>.<span class="pl-c1">3</span>]::<span class="pl-k">NUMERIC</span>[]);</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="right">array_sum</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">249.4</td>
</tr>
</tbody>
</table>
<div class="markdown-heading"><h2 class="heading-element">Format functions</h2><a id="user-content-format-functions" class="anchor" aria-label="Permalink: Format functions" href="#format-functions"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>Several countries use different formats for numbers, dates, and timestamps.
Therefore I needed some functions, which is easy to remember than the format
codes which differ in different programming languages.</p>
<div class="markdown-heading"><h3 class="heading-element">German formats</h3><a id="user-content-german-formats" class="anchor" aria-label="Permalink: German formats" href="#german-formats"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="markdown-heading"><h4 class="heading-element">FUNCTION date_de</h4><a id="user-content-function-date_de" class="anchor" aria-label="Permalink: FUNCTION date_de" href="#function-date_de"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>Creates a function which returns the given date in German format.</p>
<div class="markdown-heading"><h5 class="heading-element">Example</h5><a id="user-content-example-11" class="anchor" aria-label="Permalink: Example" href="#example-11"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> date_de(<span class="pl-s"><span class="pl-pds">'</span>2018-01-01<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> d_de;</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="center">d_de</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">01.01.2018</td>
</tr>
</tbody>
</table>
<div class="markdown-heading"><h4 class="heading-element">FUNCTION datetime_de</h4><a id="user-content-function-datetime_de" class="anchor" aria-label="Permalink: FUNCTION datetime_de" href="#function-datetime_de"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>Creates a function which returns the given timestamp in German format.</p>
<div class="markdown-heading"><h5 class="heading-element">Example</h5><a id="user-content-example-12" class="anchor" aria-label="Permalink: Example" href="#example-12"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> datetime_de(<span class="pl-s"><span class="pl-pds">'</span>2018-01-01 13:30:30 GMT<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> ts_de;</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="center">ts_de</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">01.01.2018 14:30:30</td>
</tr>
</tbody>
</table>
<div class="markdown-heading"><h2 class="heading-element">Conversion functions</h2><a id="user-content-conversion-functions" class="anchor" aria-label="Permalink: Conversion functions" href="#conversion-functions"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="markdown-heading"><h3 class="heading-element">FUNCTION to_unix_timestamp</h3><a id="user-content-function-to_unix_timestamp" class="anchor" aria-label="Permalink: FUNCTION to_unix_timestamp" href="#function-to_unix_timestamp"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>Creates two functions which returns unix timestamp for the a given timestamp or
a given timestamp with time zone.</p>
<div class="markdown-heading"><h4 class="heading-element">Examples</h4><a id="user-content-examples-20" class="anchor" aria-label="Permalink: Examples" href="#examples-20"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="highlight highlight-source-sql"><pre><span class="pl-c"><span class="pl-c">--</span> Timestamp without time zone, server uses German / Berlin time zone</span>
<span class="pl-k">SELECT</span> to_unix_timestamp(<span class="pl-s"><span class="pl-pds">'</span>2018-01-01 00:00:00<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> unix_timestamp;</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="right">unix_timestamp</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">1514761200</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-c"><span class="pl-c">--</span> Timestamp with time zone</span>
<span class="pl-k">SELECT</span> to_unix_timestamp(<span class="pl-s"><span class="pl-pds">'</span>2018-01-01 00:00:00+01<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> unix_timestamp;</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="right">unix_timestamp</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">1514761200</td>
</tr>
</tbody>
</table>
<div class="markdown-heading"><h3 class="heading-element">FUNCTION hex2bigint</h3><a id="user-content-function-hex2bigint" class="anchor" aria-label="Permalink: FUNCTION hex2bigint" href="#function-hex2bigint"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>Creates a functions which returns a hexadecimal number given as text as bigint.</p>
<div class="markdown-heading"><h5 class="heading-element">Example</h5><a id="user-content-example-13" class="anchor" aria-label="Permalink: Example" href="#example-13"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="highlight highlight-source-sql"><pre><span class="pl-k">SELECT</span> hex2bigint(<span class="pl-s"><span class="pl-pds">'</span>a1b0<span class="pl-pds">'</span></span>) <span class="pl-k">AS</span> hex_as_bigint;</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th align="right">hex_as_bigint</th>
</tr>
</thead>
<tbody>
<tr>
<td align="right">41392</td>
</tr>
</tbody>
</table>
<div class="markdown-heading"><h2 class="heading-element">Other functions</h2><a id="user-content-other-functions" class="anchor" aria-label="Permalink: Other functions" href="#other-functions"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="markdown-heading"><h3 class="heading-element">FUNCTION array_trim</h3><a id="user-content-function-array_trim" class="anchor" aria-label="Permalink: FUNCTION array_trim" href="#function-array_trim"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>Removes empty strings and null entries from a given array. In addition the
function can remove duplicate entries. The function supports strings, numbers,
dates, and timestamps with or without time zone.</p>
<div class="markdown-heading"><h4 class="heading-element">Examples</h4><a id="user-content-examples-21" class="anchor" aria-label="Permalink: Examples" href="#examples-21"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="highlight highlight-source-sql"><pre><span class="pl-c"><span class="pl-c">--</span> Untrimmed timestamp array with time zone with duplicates</span>
<span class="pl-k">SELECT</span> array_trim(ARRAY[<span class="pl-s"><span class="pl-pds">'</span>2018-11-11 11:00:00 MEZ<span class="pl-pds">'</span></span>,<span class="pl-k">NULL</span>,<span class="pl-s"><span class="pl-pds">'</span>2018-11-11 11:00:00 MEZ<span class="pl-pds">'</span></span>]::<span class="pl-k">TIMESTAMP WITH TIME ZONE</span>[]) <span class="pl-k">AS</span> trimmed_array;</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th>untrimmed_array</th>
</tr>
</thead>
<tbody>
<tr>
<td>{'2018-11-11 11:00:00.000',,'2018-11-11 11:00:00.000'}</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-c"><span class="pl-c">--</span> Timestamp array with time zone with duplicates</span>
<span class="pl-k">SELECT</span> ARRAY[<span class="pl-s"><span class="pl-pds">'</span>2018-11-11 11:00:00 MEZ<span class="pl-pds">'</span></span>,<span class="pl-k">NULL</span>,<span class="pl-s"><span class="pl-pds">'</span>2018-11-11 11:00:00 MEZ<span class="pl-pds">'</span></span>]::<span class="pl-k">TIMESTAMP WITH TIME ZONE</span>[] <span class="pl-k">AS</span> untrimmed_array;</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th>trimmed_array</th>
</tr>
</thead>
<tbody>
<tr>
<td>{'2018-11-11 11:00:00.000','2018-11-11 11:00:00.000'}</td>
</tr>
</tbody>
</table>
<div class="highlight highlight-source-sql"><pre><span class="pl-c"><span class="pl-c">--</span> Timestamp array with time zone without duplicates</span>
<span class="pl-k">SELECT</span> array_trim(ARRAY[<span class="pl-s"><span class="pl-pds">'</span>2018-11-11 11:00:00 MEZ<span class="pl-pds">'</span></span>,<span class="pl-k">NULL</span>,<span class="pl-s"><span class="pl-pds">'</span>2018-11-11 11:00:00 MEZ<span class="pl-pds">'</span></span>]::<span class="pl-k">TIMESTAMP WITH TIME ZONE</span>[], TRUE) <span class="pl-k">AS</span> trimmed_array_distinct;</pre></div>
<p>Result:</p>
<table>
<thead>
<tr>
<th>trimmed_array_distinct</th>
</tr>
</thead>
<tbody>
<tr>
<td>{'2018-11-11 11:00:00.000'}</td>
</tr>
</tbody>
</table>
<div class="markdown-heading"><h3 class="heading-element">FUNCTION get_markdown_doku_by_schema</h3><a id="user-content-function-get_markdown_doku_by_schema" class="anchor" aria-label="Permalink: FUNCTION get_markdown_doku_by_schema" href="#function-get_markdown_doku_by_schema"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>The function returns a <a href="https://en.wikipedia.org/wiki/Markdown" rel="nofollow">Markdown</a> text documentation for the given schema name.</p>
<p>Parameters:</p>
<ul>
<li>in_schema_name: Name of the schema for which the documentation should be generated</li>
<li>time_zone: The time zone that is used add a timestamp, when the documentation has been created</li>
</ul>
<p>The <a href="https://en.wikipedia.org/wiki/Markdown" rel="nofollow">Markdown</a> contains documentation for the following objects:</p>
<ul>
<li>Database</li>
<li>Schema</li>
<li>Tables with columns</li>
<li>Views with columns</li>
<li>Materialized Views with columns</li>
<li>Foreign Tables with columns</li>
<li>Functions</li>
<li>Procedures</li>
</ul>
<p>For each object the basic informations and comments are included in the documentation.</p>
<p>This example is generating the documentation as <a href="https://en.wikipedia.org/wiki/Markdown" rel="nofollow">Markdown</a> for the current database:</p>
<div class="highlight highlight-source-sql"><pre>WITH res <span class="pl-k">AS</span>
  (
    <span class="pl-k">SELECT</span> array_agg (get_markdown_doku_by_schema(schema_name)) <span class="pl-k">AS</span> markdown
    <span class="pl-k">FROM</span> <span class="pl-c1">information_schema</span>.<span class="pl-c1">schemata</span>
    <span class="pl-k">WHERE</span> <span class="pl-c1">information_schema</span>.<span class="pl-c1">schemata</span>.catalog_name <span class="pl-k">=</span> (current_database())::<span class="pl-c1">information_schema</span>.<span class="pl-c1">sql_identifier</span>
      <span class="pl-c"><span class="pl-c">--</span> Exclude some system schemas</span>
      <span class="pl-k">AND</span> schema_name NOT <span class="pl-k">IN</span>
        (
          <span class="pl-s"><span class="pl-pds">'</span>information_schema<span class="pl-pds">'</span></span>,
          <span class="pl-s"><span class="pl-pds">'</span>pg_catalog<span class="pl-pds">'</span></span>,
          <span class="pl-s"><span class="pl-pds">'</span>pg_toast<span class="pl-pds">'</span></span>
        )
      <span class="pl-c"><span class="pl-c">--</span> Exclude empty results</span>
      <span class="pl-k">AND</span> COALESCE (get_markdown_doku_by_schema(schema_name), <span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>) <span class="pl-k">&lt;&gt;</span> <span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>
	)
<span class="pl-c"><span class="pl-c">--</span> CHR(13) is a line break and is used here to have two</span>
<span class="pl-c"><span class="pl-c">--</span> line breaks between every schema result</span>
<span class="pl-k">SELECT</span> array_to_string(markdown, CHR(<span class="pl-c1">13</span>) <span class="pl-k">||</span> CHR(<span class="pl-c1">13</span>)) <span class="pl-k">AS</span> markdown_for_all_schemas
<span class="pl-k">FROM</span> res
;</pre></div>
